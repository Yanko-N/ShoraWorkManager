@model ConstructionSiteDetailsViewModel

@{
    ViewData["Title"] = "Contruction Site Details";
}

<head>
    <script src="~/js/DetailsContructionMaterial.js"></script>
    <script src="~/js/DetailsContructionHoursWorked.js"></script>
</head>

@if (ViewBag.statusMessages != null)
{
    <div class="alert alert-success alert-dismissible" role="alert" id="statusMessage">
        @foreach (var s in ViewBag.statusMessages)
        {
            <p>@s</p>
        }
        <button type="button" class="btn-close" onclick="closePopUpMessage('statusMessage')"></button>
    </div>
}


@if (ViewBag.errorsMessages != null)
{
    <div class="alert alert-danger alert-dismissible " role="alert" id="errorMessage">
        @foreach (var s in ViewBag.errorsMessages)
        {
            <p>@s</p>

        }
        <button type="button" class="btn-close" onclick="closePopUpMessage('errorMessage')"></button>
    </div>
}

<div class="row">
    <div class="col-4">
        <a asp-action="Index" class="mb-6 btn btn-outline-dark">Go back to List</a>
    </div>
    <div class="col-8">
        <h1 class="mb-4">Contruction Site Details</h1>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        <h5 class="mb-0">Contruction Site @Model.ConstructionSite.Name</h5>

    </div>
    <div class="card-body">
        <dl class="row mb-0">
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.ConstructionSite.Description)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.ConstructionSite.Description)
            </dd>

            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.ConstructionSite.Latitude)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.ConstructionSite.Latitude)
            </dd>

            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.ConstructionSite.Longitude)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.ConstructionSite.Longitude)
            </dd>

            <dt class="col-sm-2">
                Is currently Active
            </dt>
            <dd class="col-sm-10">
                @if (Model.ConstructionSite.IsActive)
                {
                    <span class="badge bg-success">Active</span>
                }
                else
                {
                    <span class="badge bg-secondary">Inactive</span>
                }
            </dd>

            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.ConstructionSite.Owner)
            </dt>
            <dd class="col-sm-10">
                @if (Model?.ConstructionSite.Owner != null)
                {
                    <partial name="../Clients/ClientButtonModal" model="@Model.ConstructionSite.Owner" />
                }
                else
                {

                    <!-- This is kinda impossivle to happen, but even like that we do something for it-->
                    <span class="text-muted">No owner</span>
                }
            </dd>
        </dl>
    </div>
</div>

<!-- Tabs -->
<ul class="nav nav-tabs" id="constructionTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="material-tab" data-bs-toggle="tab" data-bs-target="#material" type="button" role="tab" aria-controls="material" aria-selected="true">
            Material
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="workforce-tab" data-bs-toggle="tab" data-bs-target="#workforce" type="button" role="tab" aria-controls="workforce" aria-selected="false">
            Work Force
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="payments-tab" data-bs-toggle="tab" data-bs-target="#payments" type="button" role="tab" aria-controls="payments" aria-selected="false">
            Payments
        </button>
    </li>
</ul>

<div class="tab-content pt-3" id="constructionTabsContent">
    <!--Material -->
    <div class="tab-pane fade show active" id="material" role="tabpanel" aria-labelledby="material-tab">
        <partial name="MaterialsPartial" model="@Model" />
    </div>

    <!-- Mão de Obra -->
    <div class="tab-pane fade" id="workforce" role="tabpanel" aria-labelledby="workforce-tab">
       <partial name="WorkedHoursPartial" model="@Model"/>
    </div>

    <!--  Pagamentos -->
    <div class="tab-pane fade" id="payments" role="tabpanel" aria-labelledby="payments-tab">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title mb-3">Registo de Pagamentos</h5>
                <p class="text-muted mb-3">
                    Escrever o nome da pessoa • Introduzir o valor do pagamento • Guardar data/hora do registo
                </p>


                <div class="alert alert-secondary mb-0">
                    <strong>Placeholder:</strong> aqui vai o formulário para:
                    <ul class="mb-0">
                        <li>Nome da pessoa</li>
                        <li>Valor do pagamento</li>
                        <li>Data/hora do registo</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>